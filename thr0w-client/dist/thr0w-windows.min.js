!function(){"use strict";function t(t,n){function i(){var t,e=[];for(t=0;t<a.length;t++){var o=a[t];e.push({id:o.getId(),x:o.getX(),y:o.getY(),width:o.getWidth(),height:o.getHeight(),src:o.getSrc()})}return e}function r(t){function e(t){return t.id}var o,n,i,r=t.map(e),s=a.map(l),d=[];for(o=0;o<a.length;o++)i=a[o],-1===r.indexOf(i.getId())&&(a.splice(o,1),i.destroy());for(o=0;o<t.length;o++)-1===s.indexOf(t[o].id)&&a.push(new h(t[o].id,t[o].x,t[o].y,t[o].width,t[o].height,t[o].src));for(o=0;o<r.length;o++)for(n=0;n<a.length;n++)if(i=a[n],i.getId()===r[o]){i.deactivate(),d.push(i),a.splice(n,1);break}a=d,w()}function s(t){var e,o,n;for(e=0;e<a.length;e++)a[e].deactivate(),a[e].getId()===t&&(o=e,n=a[e]);a.splice(o,1),a.push(n),w(),f.update(),f.idle()}function d(t,o,i,r,s,d){if(a.length>99)throw 400;if(-1!==a.map(l).indexOf(t))throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===o||"number"!=typeof o||0>o)throw 400;if(void 0===i||"number"!=typeof i||e>i)throw 400;if(void 0===r||"number"!=typeof r||140>r)throw 400;if(void 0===s||"number"!=typeof s)throw 400;if(void 0===d||"string"!=typeof d)throw 400;if(o+r>n.getWidth())throw 400;if(i+s+e>n.getHeight())throw 400;var c;for(c=0;c<a.length;c++)a[c].deactivate();a.push(new h(t,o,i-e,r,s+e,d)),w(),f.update(),f.idle()}function c(e){if(void 0===e||"string"!=typeof e)throw 400;var o=a.map(l).indexOf(e);if(-1===o)throw 400;var n=a[o];a.splice(o,1),n.destroy(),w(),f.update(),f.idle(),document.dispatchEvent(new CustomEvent("thr0w_windows_close_window",{detail:{wmid:t,id:e}}))}function l(t){return t.getId()}function w(){var t;for(t=0;t<a.length;t++)a[t].setZ(o+t);t=a.length-1,-1!==t&&a[t].activate()}function h(t,o,i,r,d,l){function w(){return{x:o,y:i,scrollX:B,scrollY:D}}function h(t){o=t.x,i=t.y,B=t.scrollX,D=t.scrollY,K.style.left=o+"px",K.style.top=i+"px",j.contentWindow.document.body.scrollTop=B,j.contentWindow.document.body.scrollLeft=D}function a(){s(t)}function f(t){A=!0,"mousedown"===t.type?(X=t.pageX-z,Y=t.pageY-Z):(X=Math.floor(t.changedTouches[0].pageX)-z,Y=Math.floor(t.changedTouches[0].pageY)-Z),N.update()}function v(t){if(A){var e,s;"mousemove"===t.type?(e=t.pageX-z,s=t.pageY-Z):(e=Math.floor(t.changedTouches[0].pageX)-z,s=Math.floor(t.changedTouches[0].pageY)-Z),o=Math.min(o+e-X,n.getWidth()-r),o=Math.max(o,0),i=Math.min(i+s-Y,n.getHeight()-d),i=Math.max(i,0),K.style.left=o+"px",K.style.top=i+"px",X=e,Y=s,N.update()}}function _(){A=!1,N.idle()}function g(){c(t)}function p(){j.removeEventListener("load",p),j.contentWindow.document.addEventListener("scroll",S)}function m(){return t}function y(){return o}function L(){return i}function b(){return r}function E(){return d}function x(){return l}function k(t){K.style.zIndex=t}function W(){F||(F=!0,C.style.visibility="hidden",q.style.visibility="visible")}function T(){F&&(F=!1,q.style.visibility="hidden",C.style.visibility="visible")}function M(){K.removeEventListener("mousedown",a),K.removeEventListener("touchstart",a),I.removeEventListener("mousedown",f),I.removeEventListener("touchstart",f),I.removeEventListener("mousemove",v),I.removeEventListener("touchmove",v),I.removeEventListener("mouseup",_),I.removeEventListener("mouseleave",_),I.removeEventListener("touchend",_),I.removeEventListener("touchcancel",_),H.removeEventListener("click",g),j.contentWindow.location.href="about:blank",u.removeChild(K),N.destroy()}function S(){function t(){J?(G=!1,N.idle()):(J=!0,window.setTimeout(t,1e3))}G||(window.setTimeout(t,1e3),G=!0),J=!1,B=j.contentWindow.document.body.scrollTop,D=j.contentWindow.document.body.scrollLeft,N.update()}var X,Y,I,q,H,j,C,O=n.getFrame(),z=O.offsetLeft+u.offsetLeft,Z=O.offsetTop+u.offsetTop,F=!0,A=!1,B=0,D=0,G=!1,J=!0,K=document.createElement("div"),N=new window.thr0w.Sync(n,"thr0w_windows_"+u.id+"_"+t,w,h);K.id=t,K.style.left=o+"px",K.style.top=i+"px",K.style.width=r+"px",K.style.height=d+"px",K.classList.add("thr0w_windows_window"),K.innerHTML=['<div class="thr0w_windows_window__bar">','<div class="thr0w_windows_window__bar__controls">','<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewbox="0 0 100 100" class="thr0w_windows_window__bar__controls__control thr0w_windows_window__bar__controls__control--close">',"<g>",'<ellipse stroke="#cccccc" ry="49" rx="49" id="svg_1" cy="50" cx="50" stroke-width="2" fill="#ffffff"/>','<path id="svg_4" fill-opacity="0.5" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#cccccc" fill="#cccccc"/>','<path id="svg_6" d="m13.75,30.5l18.5,18.75l-19.5,20.25l17.25,16.75l20.5,-19l19.25,19.5l17.25,-17l-19.5,-19.25l19.75,-19.75l-17.5,-17.5l-19.25,20l-19.5,-20l-17.25,17.25z" fill-opacity="0.5" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#cccccc" fill="#cccccc"/>',"</g>","</svg>","</div>","</div>",'<iframe src="'+l+'" width="'+r+'" height="'+(d-e)+'" frameborder="0" class="thr0w_windows_window__content">',"</iframe>",'<div style="width: '+r+"px; height: "+(d-e)+'px;" class="thr0w_windows_window__cover"></div>'].join("\n"),K.addEventListener("mousedown",a),K.addEventListener("touchstart",a),I=K.querySelector(".thr0w_windows_window__bar"),I.addEventListener("mousedown",f),I.addEventListener("touchstart",f),I.addEventListener("mousemove",v),I.addEventListener("touchmove",v),I.addEventListener("mouseup",_),I.addEventListener("mouseleave",_),I.addEventListener("touchend",_),I.addEventListener("touchcancel",_),q=K.querySelector(".thr0w_windows_window__bar__controls"),q.style.visibility="visible",H=q.querySelector(".thr0w_windows_window__bar__controls__control--close"),H.addEventListener("click",g),j=K.querySelector(".thr0w_windows_window__content"),j.addEventListener("load",p),C=K.querySelector(".thr0w_windows_window__cover"),C.style.visibility="hidden",u.appendChild(K),this.getId=m,this.getX=y,this.getY=L,this.getWidth=b,this.getHeight=E,this.getSrc=x,this.activate=W,this.deactivate=T,this.destroy=M,this.setZ=k}if(void 0===t||"string"!=typeof t)throw 400;if(!n||"object"!=typeof n)throw 400;var a=[],u=n.getContent(),f=new window.thr0w.Sync(n,"thr0w_windows_"+u.id,i,r);this.openWindow=d,this.closeWindow=c}var e=50,o=800;if(void 0===window.thr0w)throw 400;var n={};n.WindowManager=t,window.thr0w.windows=n}();